# 最終測試步驟

## 🎯 目標
確認 DMG 安裝的應用程式視窗完全可見（100% 不透明）

## ✅ 已完成的修復

1. ✅ 在 `WindowManager.ts` 中設置初始 opacity: 1.0
2. ✅ 在 `main.ts` 中載入設定並應用透明度
3. ✅ 添加錯誤處理，確保即使載入失敗也會設置為 1.0
4. ✅ 預設設定改為 windowOpacity: 1.0
5. ✅ 重新打包並測試

## 📦 測試新版本

### 步驟 1：完全清理
\`\`\`bash
# 停止所有實例
pkill -9 VoiceInput

# 刪除舊版本
rm -rf /Applications/VoiceInput.app

# 刪除所有設定
rm -rf ~/Library/Application\ Support/voice-input-app

# 確認清理完成
echo "✓ 清理完成"
\`\`\`

### 步驟 2：安裝新版本
\`\`\`bash
# 打開 DMG
open release/VoiceInput-1.0.0-universal.dmg

# 等待 DMG 掛載
# 然後拖曳 VoiceInput.app 到 Applications 資料夾
\`\`\`

或使用命令列：
\`\`\`bash
hdiutil attach release/VoiceInput-1.0.0-universal.dmg -mountpoint /tmp/dmg
cp -R /tmp/dmg/VoiceInput.app /Applications/
hdiutil detach /tmp/dmg
\`\`\`

### 步驟 3：啟動應用程式
\`\`\`bash
open /Applications/VoiceInput.app
\`\`\`

### 步驟 4：等待並查找視窗

**等待 3-5 秒**，然後：

#### 方法 A：使用 Cmd+Tab
1. 按住 `Cmd` 鍵
2. 按 `Tab` 鍵直到選中 VoiceInput
3. 放開按鍵

#### 方法 B：使用 Mission Control
1. 按 `F3` 或三指上滑
2. 查看所有視窗
3. 點擊 VoiceInput 視窗

#### 方法 C：檢查螢幕中央
視窗應該在螢幕中央顯示，大小約 400x600 像素

## ✨ 預期結果

你應該看到：

```
┌─────────────────────────────────┐
│ ● ● ●                           │  ← 標題欄（紅黃綠按鈕）
├─────────────────────────────────┤
│                                 │
│         🎤                      │  ← 麥克風按鈕
│                                 │
│   [文字顯示區域]                │
│                                 │
│                                 │
│         ⚙️  設定                │  ← 設定按鈕
│                                 │
└─────────────────────────────────┘
```

- 背景：深色漸層（灰色到紫色）
- 完全不透明（100%）
- 所有元素清晰可見

## ❌ 如果還是看不到

### 檢查 1：確認應用程式正在運行
\`\`\`bash
ps aux | grep VoiceInput | grep -v grep
\`\`\`

應該看到 4-5 個進程。

### 檢查 2：查看設定檔
\`\`\`bash
cat ~/Library/Application\ Support/voice-input-app/app-settings.json
\`\`\`

應該看到 `"windowOpacity": 1` 或根本沒有這個檔案（會使用預設值）。

### 檢查 3：重置視窗位置
\`\`\`bash
rm ~/Library/Application\ Support/voice-input-app/window-state.json
pkill VoiceInput
open /Applications/VoiceInput.app
\`\`\`

### 檢查 4：使用開發模式測試
\`\`\`bash
cd ~/Documents/007.Kiro\'s\ Projects/voice-input-assistant
npm run dev
\`\`\`

如果開發模式可以看到，但打包版本看不到，請告訴我。

## 📸 請提供

如果還是有問題，請提供：

1. **Mission Control 截圖**（按 F3）
2. **Cmd+Tab 截圖**（按 Cmd+Tab）
3. **終端機輸出**：
\`\`\`bash
ps aux | grep VoiceInput | grep -v grep
ls -la ~/Library/Application\ Support/voice-input-app/
\`\`\`

## 🎉 成功標準

- ✅ 視窗完全可見
- ✅ 可以看到所有 UI 元素
- ✅ 可以點擊按鈕
- ✅ 可以拖曳視窗
- ✅ 視窗始終在最上層

## 📝 注意事項

1. 首次啟動可能需要 3-5 秒
2. macOS 可能會要求授予權限
3. 如果有安全性警告，右鍵點擊 → 打開
4. 視窗會記住上次的位置
5. 預設透明度是 100%（完全不透明）
