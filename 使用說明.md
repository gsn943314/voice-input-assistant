# VoiceInput 語音輸入助手 - 使用說明

## 🚀 快速開始

### 第一步：啟動應用程式

在終端機執行：

```bash
npm run dev
```

應用程式會自動開啟一個浮動視窗。

### 第二步：設定 API 金鑰

1. **取得 OpenAI API 金鑰**
   - 前往 https://platform.openai.com/api-keys
   - 登入你的 OpenAI 帳號
   - 點擊「Create new secret key」
   - 複製金鑰（以 `sk-` 開頭）

2. **在應用程式中設定**
   - 點擊視窗右上角的 ⚙️ 圖示
   - 在「OpenAI API 金鑰」欄位貼上你的金鑰
   - 選擇預設語言（中文或 English）
   - 點擊「儲存」

### 第三步：授予麥克風權限

第一次錄音時，macOS 會詢問麥克風權限：
- 點擊「好」或「允許」

如果不小心拒絕了：
1. 開啟「系統偏好設定」
2. 前往「安全性與隱私權」>「隱私權」>「麥克風」
3. 勾選 Electron 或應用程式名稱

### 第四步：開始使用

**錄音方式：**
- 點擊 🎤 麥克風按鈕開始錄音
- 按鈕會變紅色並閃爍
- 對著麥克風清楚地說話
- 點擊 ⏹️ 停止按鈕結束錄音

**快捷鍵：**
- `Cmd+Shift+R` - 開始錄音
- `Cmd+Shift+S` - 停止錄音

**複製文字：**
- 點擊 📋 複製按鈕
- 文字會複製到剪貼簿
- 用 `Cmd+V` 貼到任何地方

## 🔧 除錯方法

### 問題：無法儲存設定

**檢查步驟：**

1. **開啟開發者工具**
   - 應用程式會自動開啟（開發模式）
   - 查看 Console 標籤的錯誤訊息

2. **檢查 API 金鑰格式**
   - 必須以 `sk-` 開頭
   - 長度至少 20 個字元
   - 不能有多餘的空格

3. **使用除錯工具**
   - 開啟 `debug-settings.html` 檔案
   - 在瀏覽器中開啟（需要先啟動 `npm run dev`）
   - 點擊各個測試按鈕來診斷問題

4. **檢查設定檔**
   ```bash
   # 查看設定檔是否存在
   ls -la ~/Library/Application\ Support/voice-input-app/
   
   # 查看設定內容（如果存在）
   cat ~/Library/Application\ Support/voice-input-app/app-settings.json
   ```

5. **清除設定重新開始**
   ```bash
   # 刪除所有設定
   rm -rf ~/Library/Application\ Support/voice-input-app/
   
   # 重新啟動應用程式
   npm run dev
   ```

### 問題：錄音沒有反應

**解決方法：**

1. **檢查麥克風權限**
   ```bash
   # 開啟系統偏好設定
   open "x-apple.systempreferences:com.apple.preference.security?Privacy_Microphone"
   ```

2. **測試麥克風**
   - 開啟「QuickTime Player」
   - 選擇「檔案」>「新增音訊錄製」
   - 確認麥克風正常工作

3. **查看控制台錯誤**
   - 開啟開發者工具
   - 查看 Console 標籤
   - 尋找紅色錯誤訊息

### 問題：轉錄失敗

**可能原因：**

1. **API 金鑰無效**
   - 重新檢查金鑰是否正確
   - 確認 OpenAI 帳號有餘額

2. **網路問題**
   - 檢查網路連線
   - 確認可以訪問 OpenAI API

3. **音訊檔案太大**
   - 錄音時間不要超過 5 分鐘
   - 檔案大小限制 25MB

## 📁 檔案位置

### 設定檔
```
~/Library/Application Support/voice-input-app/app-settings.json
```

### 視窗位置
```
~/Library/Application Support/voice-input-app/window-state.json
```

### 歷史記錄
```
~/Library/Application Support/voice-input-app/app-history.json
```

## 💡 使用技巧

### 獲得最佳轉錄品質

1. **環境**
   - 在安靜的環境錄音
   - 減少背景噪音

2. **麥克風**
   - 使用品質好的麥克風
   - 保持適當距離（15-30 公分）

3. **說話方式**
   - 清楚地發音
   - 語速正常，不要太快
   - 避免長時間停頓

4. **錄音長度**
   - 建議每次錄音 1-3 分鐘
   - 太長的錄音可能影響準確度

### 視窗管理

- **移動視窗**：拖曳標題列
- **調整透明度**：在設定中調整（50-100%）
- **保持最上層**：視窗會自動保持在最上層
- **最小化**：點擊 [─] 按鈕

### 歷史記錄

- **查看歷史**：向下滾動查看最近的轉錄
- **重新載入**：點擊任何歷史項目
- **清空歷史**：點擊「清空」按鈕
- **調整數量**：在設定中調整上限（1-100）

## 🆘 需要幫助？

### 查看日誌

開發模式下，所有日誌都會顯示在終端機和開發者工具的 Console 中。

### 常見錯誤訊息

| 錯誤訊息 | 原因 | 解決方法 |
|---------|------|---------|
| "API key not configured" | 未設定 API 金鑰 | 在設定中輸入 API 金鑰 |
| "Invalid API key" | API 金鑰無效 | 檢查金鑰格式和有效性 |
| "Microphone access denied" | 未授予麥克風權限 | 在系統偏好設定中授予權限 |
| "Network error" | 網路連線問題 | 檢查網路連線 |
| "Audio file too large" | 音訊檔案超過 25MB | 縮短錄音時間 |

### 重置應用程式

如果遇到無法解決的問題，可以完全重置：

```bash
# 1. 停止應用程式
# 按 Ctrl+C 停止 npm run dev

# 2. 刪除所有資料
rm -rf ~/Library/Application\ Support/voice-input-app/

# 3. 清除建置檔案
rm -rf dist/

# 4. 重新建置
npm run build

# 5. 重新啟動
npm run dev
```

## 📞 聯絡支援

如果問題仍然存在：

1. 查看 [README.md](README.md) 的完整文件
2. 查看 [GitHub Issues](../../issues) 尋找類似問題
3. 建立新的 Issue 並提供：
   - 錯誤訊息
   - 操作步驟
   - 系統資訊（macOS 版本）
   - 控制台日誌

## 💰 費用說明

OpenAI Whisper API 按音訊分鐘數計費：
- **每分鐘 $0.006**（2024 年價格）
- 例如：100 分鐘 = $0.60

在 [OpenAI 使用儀表板](https://platform.openai.com/usage) 查看你的用量和餘額。

---

祝你使用愉快！🎤✨
