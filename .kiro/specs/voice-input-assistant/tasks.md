# 實作計畫

- [x] 1. 建立專案結構和基礎配置
  - 初始化 Electron + React + TypeScript 專案
  - 配置 Tailwind CSS
  - 設定 TypeScript 編譯選項
  - 建立基本的資料夾結構（src/main, src/renderer, src/shared）
  - 配置 electron-builder 用於打包
  - _需求: 1.1, 6.1, 6.2_

- [x] 2. 實作 Main Process 核心功能
- [x] 2.1 建立 WindowManager 類別
  - 實作浮動視窗建立邏輯
  - 配置視窗屬性（alwaysOnTop, frame, transparent）
  - 實作視窗位置記憶功能
  - 實作最小化和關閉功能
  - _需求: 1.1, 1.2, 1.3, 1.4, 1.5_

- [x] 2.2 實作 SettingsManager 類別
  - 整合 electron-store
  - 實作設定的儲存、載入、重置方法
  - 實作 API 金鑰的加密儲存
  - 定義 AppSettings 介面和預設值
  - _需求: 2.1, 7.5_

- [x] 2.3 建立 IPC 通訊處理器
  - 實作音訊資料接收的 IPC handler
  - 實作設定儲存/載入的 IPC handler
  - 實作剪貼簿操作的 IPC handler
  - 定義 IPC 通道名稱常數
  - _需求: 3.5, 4.3_

- [x] 3. 實作 Whisper API 整合
- [x] 3.1 建立 WhisperClient 類別
  - 整合 OpenAI Node.js SDK
  - 實作 transcribe 方法
  - 實作 API 金鑰驗證方法
  - 處理 API 錯誤和重試邏輯
  - _需求: 2.1, 2.2, 2.3, 2.4_

- [x] 3.2 實作音訊處理邏輯
  - 將 Blob 轉換為 Buffer
  - 實作音訊格式轉換（如需要）
  - 實作音訊檔案大小檢查
  - 在 Main Process 中整合 WhisperClient
  - _需求: 2.2, 3.5_

- [x] 4. 建立 Renderer Process UI 組件
- [x] 4.1 建立 App 根組件
  - 設定 React 應用程式結構
  - 實作全域狀態管理（使用 Context）
  - 定義 AppState 介面
  - 實作狀態更新邏輯
  - _需求: 5.1, 5.2, 5.3, 5.4_

- [x] 4.2 實作 AudioRecorder 服務
  - 使用 MediaRecorder API 實作錄音功能
  - 實作麥克風權限請求
  - 實作錄音開始/停止方法
  - 實作音訊 Blob 生成
  - 處理錄音錯誤
  - _需求: 3.1, 3.2, 3.4, 5.1_

- [x] 4.3 建立 RecordingControl 組件
  - 實作錄音按鈕 UI
  - 實作錄音狀態視覺指示器（脈動動畫）
  - 實作錄音計時器顯示
  - 整合 AudioRecorder 服務
  - 實作鍵盤快捷鍵支援
  - _需求: 3.1, 3.2, 3.3, 3.4, 3.6, 5.1_

- [x] 4.4 建立 TextDisplay 組件
  - 實作文字顯示區域
  - 實作複製按鈕和功能
  - 實作複製成功的視覺回饋
  - 實作文字區域的自動滾動
  - _需求: 4.1, 4.2, 4.3, 4.4_

- [x] 4.5 建立 StatusIndicator 組件
  - 實作不同狀態的視覺指示器
  - 實作狀態文字顯示
  - 實作載入動畫
  - 實作錯誤訊息顯示
  - _需求: 5.1, 5.2, 5.3, 5.4, 5.5_

- [x] 5. 實作歷史記錄功能
- [x] 5.1 建立 TranscriptionHistory 資料模型
  - 定義 TranscriptionHistory 介面
  - 實作歷史記錄的儲存邏輯
  - 實作歷史記錄的載入邏輯
  - 實作歷史記錄數量限制
  - _需求: 4.5_

- [x] 5.2 建立 HistoryList 組件
  - 實作歷史記錄列表 UI
  - 實作點擊載入歷史項目功能
  - 實作時間戳記顯示
  - 實作清空歷史記錄功能
  - _需求: 4.5_

- [x] 6. 實作設定介面
- [x] 6.1 建立 Settings 組件
  - 實作設定面板 UI
  - 實作 API 金鑰輸入欄位（密碼類型）
  - 實作語言選擇下拉選單
  - 實作視窗透明度滑桿
  - 實作快捷鍵設定輸入
  - 實作儲存和取消按鈕
  - _需求: 2.1, 7.1, 7.2, 7.3, 7.4, 7.5_

- [x] 6.2 實作設定驗證邏輯
  - 驗證 API 金鑰格式
  - 驗證快捷鍵衝突
  - 實作設定變更的即時預覽
  - _需求: 2.3, 7.3_

- [x] 7. 實作錯誤處理
- [x] 7.1 建立錯誤處理系統
  - 定義 ErrorType 枚舉和 AppError 介面
  - 實作全域錯誤處理器
  - 實作錯誤日誌記錄
  - _需求: 5.4_

- [x] 7.2 建立 ErrorDisplay 組件
  - 實作錯誤訊息顯示 UI
  - 根據錯誤類型顯示不同的訊息和操作
  - 實作重試按鈕
  - 實作錯誤訊息的自動消失
  - _需求: 5.4, 5.5_

- [x] 7.3 實作特定錯誤處理
  - 處理麥克風權限被拒絕的情況
  - 處理 API 金鑰無效的情況
  - 處理網路錯誤
  - 處理錄音失敗
  - _需求: 2.3, 5.4_

- [x] 8. 實作 UI 樣式和動畫
- [x] 8.1 設計和實作主視窗樣式
  - 使用 Tailwind CSS 建立視窗佈局
  - 實作自訂標題列
  - 實作拖曳區域
  - 實作視窗透明度效果
  - _需求: 1.1, 7.4_

- [x] 8.2 實作動畫效果
  - 實作錄音按鈕的脈動動畫
  - 實作載入旋轉動畫
  - 實作複製成功的淡入淡出動畫
  - 實作狀態切換的過渡效果
  - _需求: 3.3, 4.4, 5.1, 5.2, 5.3_

- [x] 9. 整合和端到端測試
- [x] 9.1 整合所有組件
  - 連接 Main Process 和 Renderer Process
  - 確保 IPC 通訊正常運作
  - 整合所有 UI 組件到 App
  - 實作完整的錄音到顯示流程
  - _需求: 所有需求_

- [x] 9.2 進行端到端測試
  - 測試完整的錄音和轉換流程
  - 測試設定的儲存和載入
  - 測試歷史記錄功能
  - 測試錯誤處理和恢復
  - 測試視窗行為（拖曳、置頂、最小化）
  - _需求: 所有需求_

- [x] 10. 效能優化和打包
- [x] 10.1 效能優化
  - 優化記憶體使用
  - 優化音訊處理效能
  - 實作歷史記錄的虛擬滾動
  - 實作設定變更的防抖動
  - _需求: 6.1, 6.2, 6.3_

- [x] 10.2 配置應用程式打包
  - 配置 electron-builder
  - 建立應用程式圖示
  - 設定 macOS 應用程式簽名（如需要）
  - 建立 DMG 安裝檔
  - _需求: 6.4_

- [x] 10.3 建立使用說明文件
  - 撰寫 README.md
  - 建立快速開始指南
  - 說明如何取得 OpenAI API 金鑰
  - 說明如何設定和使用應用程式
  - _需求: 2.1, 2.5_
